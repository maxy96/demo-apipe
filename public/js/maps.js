(()=>{let e;const o=[{chofer:"Chofer 1",patente:"pat-1",estado:"Ocupado",ubicacion:{lat:-27.466736,lng:-58.809367}},{chofer:"Chofer 2",patente:"pat-2",estado:"Disponible",ubicacion:{lat:-27.466355,lng:-58.82825}},{chofer:"Chofer 3",patente:"pat-3",estado:"Disponible",ubicacion:{lat:-27.461481,lng:-58.836318}}],t=document.querySelectorAll(".current-position"),n=document.getElementById("fromAddress"),a=document.getElementById("toAddress");function i(o,t,n){t.setPosition(n),t.setContent(o?"Error: The Geolocation service failed.":"Error: Tu navagador no soporta geolocalizacion."),t.open(e)}function r(e,o,t,n){if(o.geocode({placeId:e.place_id},(function(e,o){if(o===google.maps.GeocoderStatus.OK){const o=e[0].geometry.location.lat(),n=e[0].geometry.location.lng();t.setPosition({lat:o,lng:n})}})),!e.geometry)return window.alert("Datos incorrectos "),void(n.value="")}function c(e,o){n.value&&a.value&&e.route({origin:{query:n.value},destination:{query:a.value},travelMode:google.maps.TravelMode.DRIVING},((e,t)=>{"OK"===t?o.setDirections(e):window.alert("Directions request failed due to "+t)}))}window.positionFrom,window.positionTo,window.initMap=function(){const l=new google.maps.Geocoder,s=new google.maps.places.Autocomplete(n),d=new google.maps.places.Autocomplete(a),g=new google.maps.DirectionsService,p=new google.maps.DirectionsRenderer;e=new google.maps.Map(document.getElementById("map"),{center:{lat:-27.471381,lng:-58.832112},zoom:13}),p.setMap(e);const u=new google.maps.Marker({map:e}),m=new google.maps.Marker({map:e});!function(e){for(remis of o){let o=new google.maps.InfoWindow,t=new google.maps.Marker({icon:{url:"http://localhost:3000/public/images/car.png",scaledSize:new google.maps.Size(25,25)},position:remis.ubicacion,map:e});google.maps.event.addListener(t,"click",function(t,n){return function(){o.setContent(`<div>\n          <p>Chofer: ${n.chofer}</p>\n          <p>Patente: ${n.patente}</p>\n          <p>Estado: ${n.estado}</p>\n        </div>`),o.open(e,t)}}(t,remis))}}(e),s.addListener("place_changed",(()=>{r(s.getPlace(),l,u,n),c(g,p)})),d.addListener("place_changed",(()=>{r(d.getPlace(),l,m,a),c(g,p)})),t[0].addEventListener("click",(()=>{!function(o,t,n){navigator.geolocation?navigator.geolocation.getCurrentPosition((a=>{const i={lat:a.coords.latitude,lng:a.coords.longitude};positionFrom=i,t.geocode({location:i},((e,t)=>{"OK"==t&&e[0]&&(o.value=e[0].formatted_address)})),e.setCenter(i),n.setPosition(i)}),(()=>{i(!0,infoWindow,e.getCenter())})):i(!1,infoWindow,e.getCenter())}(n,l,u),c(g,p)}))}})();